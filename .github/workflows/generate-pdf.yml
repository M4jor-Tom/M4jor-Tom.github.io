name: PDF Exporting

on:
  push:
    branches: [ "master" ]

jobs:

  convert:

    runs-on: ubuntu-latest

    permissions: write-all

    steps:

    # - name: Install pandoc
    #   run: sudo apt-get install -y pandoc

    # - name: Install xelatex
    #   run: sudo apt-get install -y texlive-xetex

    # - name: Install lmodern
    #   run: sudo apt-get install lmodern

    # - name: Install fonts
    #   run: sudo apt-get install texlive-fonts-recommended

    - uses: actions/checkout@v3

    - name: Configure Git
      run: |
        git config --global user.name 'Tom Vautray'
        git config --global user.email 'tom-vautray@hotmail.fr'
    
    - name: Git pull
      run: git pull
    
    - name: Git checkout
      run: git checkout pdf-cv-releasing

    - name: Screenshot
      run: chromium --headless --screenshot="cv.png" https://m4jor-tom.github.io/

    - name: Commit & Push
      run: |
        git add --all
        git commit -m "Cv commit by convert job"
        git push
